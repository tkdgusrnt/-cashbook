<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gdu.cashbook.mapper.MemberMapper">
<!-- 회원수정 -->
<update id="updateMember" parameterType="com.gdu.cashbook.vo.Member">
	UPDATE 
		member SET
		member_addr=#{memberAddr},
		member_phone=#{memberPhone},
		member_email=#{memberEmail}
	WHERE
		member_id=#{memberId}	
	
</update>

<!-- 회원탈퇴 -->
<delete id="deleteMember" parameterType="com.gdu.cashbook.vo.LoginMember">
	DELETE FROM
		member
	WHERE
		member_id=#{memberId}
	AND
		member_pw=#{memberPw}	
</delete>

<!-- 회원정보 확인 -->
<select id="selectMemberOne" parameterType="com.gdu.cashbook.vo.LoginMember" resultType="com.gdu.cashbook.vo.Member">

	SELECT
		member_id memberId, 
		member_name memberName,
		member_addr memberAddr,
		member_phone memberPhone,
		member_email memberEmail,
		member_date memberDate
	FROM member
	WHERE member_id=#{memberId}	
</select>

<!-- 회원가입 -->
 <insert id="insertMember" parameterType="com.gdu.cashbook.vo.Member">
 	INSERT INTO member(
 		member_id,
 	    member_pw,
 	    member_name,
 	    member_addr,
 	    member_phone,
 	    member_email,
 	    member_date
 	)VALUES(
 		#{memberId},
 		PASSWORD(#{memberPw}),
 		#{memberName},
 		#{memberAddr},
 		#{memberPhone},
 		#{memberEmail},
 		NOW()
 	)
 </insert>
 
 <!-- 로그인 아이디 확인 -->
 <select id="selectLoginMember" parameterType="com.gdu.cashbook.vo.LoginMember" resultType="com.gdu.cashbook.vo.LoginMember">
 	SELECT
 		member_id memberId,
 		member_pw memberPw
 	FROM member
 	WHERE member_id = #{memberId}
 	AND member_pw = PASSWORD(#{memberPw})
 </select>
 
 <!-- 아이디 중복 확인 -->
 <select id="selectMemberId" parameterType="String" resultType="String">
 	SELECT
 	 member_id
    FROM (SELECT member_id FROM member
    	  UNION
    	  SELECT member_id FROM memberid
    	  )t
    WHERE member_id=#{memberIdCheck}
 </select>
 
</mapper>